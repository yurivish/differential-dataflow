<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `CoreVariable` struct in crate `differential_dataflow`."><meta name="keywords" content="rust, rustlang, rust-lang, CoreVariable"><title>differential_dataflow::operators::iterate::CoreVariable - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css"><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script src="../../../storage.js"></script></head><body class="rustdoc struct"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><p class='location'>Struct CoreVariable</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#methods">Methods</a><div class="sidebar-links"><a href="#method.from_args">from_args</a><a href="#method.set">set</a></div><a class="sidebar-title" href="#deref-methods">Methods from Deref&lt;Target=Collection&lt;Child&lt;&#39;a, G, T&gt;, D, R&gt;&gt;</a><div class="sidebar-links"><a href="#method.map">map</a><a href="#method.map_in_place">map_in_place</a><a href="#method.flat_map">flat_map</a><a href="#method.negate">negate</a><a href="#method.filter">filter</a><a href="#method.concat">concat</a><a href="#method.explode">explode</a><a href="#method.enter">enter</a><a href="#method.enter_at">enter_at</a><a href="#method.delay">delay</a><a href="#method.inspect">inspect</a><a href="#method.inspect_batch">inspect_batch</a><a href="#method.probe">probe</a><a href="#method.probe_with">probe_with</a><a href="#method.assert_eq">assert_eq</a><a href="#method.assert_empty">assert_empty</a><a href="#method.scope">scope</a><a href="#method.leave">leave</a></div><a class="sidebar-title" href="#implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Deref">Deref</a></div><a class="sidebar-title" href="#synthetic-implementations">Auto Trait Implementations</a><div class="sidebar-links"><a href="#impl-Send">!Send</a><a href="#impl-Sync">!Sync</a></div></div><p class='location'><a href='../../index.html'>differential_dataflow</a>::<wbr><a href='../index.html'>operators</a>::<wbr><a href='index.html'>iterate</a></p><script>window.sidebarCurrent = {name: 'CoreVariable', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><input class="search-input" name="search" autocomplete="off" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='in-band'>Struct <a href='../../index.html'>differential_dataflow</a>::<wbr><a href='../index.html'>operators</a>::<wbr><a href='index.html'>iterate</a>::<wbr><a class="struct" href=''>CoreVariable</a></span><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../../src/differential_dataflow/operators/iterate.rs.html#174-180' title='goto source code'>[src]</a></span></h1><div class="docblock type-decl"><pre class='rust struct'>pub struct CoreVariable&lt;'a, G:&nbsp;<a class="trait" href="../../../timely/dataflow/scopes/trait.Scope.html" title="trait timely::dataflow::scopes::Scope">Scope</a>, D:&nbsp;<a class="trait" href="../../../differential_dataflow/trait.Data.html" title="trait differential_dataflow::Data">Data</a>, R:&nbsp;<a class="trait" href="../../../differential_dataflow/difference/trait.Diff.html" title="trait differential_dataflow::difference::Diff">Diff</a>, T:&nbsp;<a class="trait" href="../../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a> + <a class="trait" href="../../../differential_dataflow/lattice/trait.Lattice.html" title="trait differential_dataflow::lattice::Lattice">Lattice</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>: <a class="trait" href="../../../differential_dataflow/lattice/trait.Lattice.html" title="trait differential_dataflow::lattice::Lattice">Lattice</a>,&nbsp;</span> { /* fields omitted */ }</pre></div><div class='docblock'><p>A recursive variable with a generic timestamp type.</p>
<p>This type generalizes <code>Variable</code> by permitting an arbitrary timestamp type, but incurs the additional
cost of validating the step of the timestamp, which <code>Variable</code> does not do. This is technically a bug
in <code>Variable</code>, as supplying a timestamp that overflows (using e.g. <code>enter_at</code>) would result in errors.</p>
</div>
                    <h2 id='methods' class='small-section-header'>
                      Methods<a href='#methods' class='anchor'></a>
                    </h2>
                <h3 id='impl' class='impl'><span class='in-band'><table class='table-display'><tbody><tr><td><code>impl&lt;'a, G:&nbsp;<a class="trait" href="../../../timely/dataflow/scopes/trait.Scope.html" title="trait timely::dataflow::scopes::Scope">Scope</a>, D:&nbsp;<a class="trait" href="../../../differential_dataflow/trait.Data.html" title="trait differential_dataflow::Data">Data</a>, R:&nbsp;<a class="trait" href="../../../differential_dataflow/difference/trait.Diff.html" title="trait differential_dataflow::difference::Diff">Diff</a>, T:&nbsp;<a class="trait" href="../../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a> + <a class="trait" href="../../../differential_dataflow/lattice/trait.Lattice.html" title="trait differential_dataflow::lattice::Lattice">Lattice</a>&gt; <a class="struct" href="../../../differential_dataflow/operators/iterate/struct.CoreVariable.html" title="struct differential_dataflow::operators::iterate::CoreVariable">CoreVariable</a>&lt;'a, G, D, R, T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>: <a class="trait" href="../../../differential_dataflow/lattice/trait.Lattice.html" title="trait differential_dataflow::lattice::Lattice">Lattice</a>,&nbsp;</span></code><a href='#impl' class='anchor'></a></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/operators/iterate.rs.html#182-200' title='goto source code'>[src]</a></span></td></tr></tbody></table></h3><div class='impl-items'><h4 id='method.from_args' class="method"><span id='from_args.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.from_args' class='fnname'>from_args</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;max_steps: T, <br>&nbsp;&nbsp;&nbsp;&nbsp;step: &lt;T as <a class="trait" href="../../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a>&gt;::<a class="type" href="../../../timely/progress/timestamp/trait.Timestamp.html#associatedtype.Summary" title="type timely::progress::timestamp::Timestamp::Summary">Summary</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;source: <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;<a class="struct" href="../../../timely/dataflow/scopes/child/struct.Child.html" title="struct timely::dataflow::scopes::child::Child">Child</a>&lt;'a, G, T&gt;, D, R&gt;<br>) -&gt; <a class="struct" href="../../../differential_dataflow/operators/iterate/struct.CoreVariable.html" title="struct differential_dataflow::operators::iterate::CoreVariable">CoreVariable</a>&lt;'a, G, D, R, T&gt;</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/operators/iterate.rs.html#184-188' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Creates a new <code>Variable</code> and a <code>Stream</code> representing its output, from a supplied <code>source</code> stream.</p>
</div><h4 id='method.set' class="method"><span id='set.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.set' class='fnname'>set</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;result: &amp;<a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;<a class="struct" href="../../../timely/dataflow/scopes/child/struct.Child.html" title="struct timely::dataflow::scopes::child::Child">Child</a>&lt;'a, G, T&gt;, D, R&gt;<br>) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;<a class="struct" href="../../../timely/dataflow/scopes/child/struct.Child.html" title="struct timely::dataflow::scopes::child::Child">Child</a>&lt;'a, G, T&gt;, D, R&gt;</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/operators/iterate.rs.html#190-199' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Adds a new source of data to the <code>Variable</code>.</p>
</div></div>
                    <h2 id='deref-methods' class='small-section-header'>
                      Methods from <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&lt;Target = <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;<a class="struct" href="../../../timely/dataflow/scopes/child/struct.Child.html" title="struct timely::dataflow::scopes::child::Child">Child</a>&lt;'a, G, T&gt;, D, R&gt;&gt;<a href='#deref-methods' class='anchor'></a>
                    </h2>
                <div class='impl-items'><h4 id='method.map' class="method"><span id='map.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.map' class='fnname'>map</a>&lt;D2, L&gt;(&amp;self, logic: L) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D2, R&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;D2: <a class="trait" href="../../../timely/trait.Data.html" title="trait timely::Data">Data</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(D) -&gt; D2 + 'static,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#78-85' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Creates a new collection by applying the supplied function to each input element.</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {
        <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>
             .<span class="ident">map</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">*</span> <span class="number">2</span>)
             .<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">1</span>)
             .<span class="ident">assert_empty</span>();
    });
}</pre>
</div><h4 id='method.map_in_place' class="method"><span id='map_in_place.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.map_in_place' class='fnname'>map_in_place</a>&lt;L&gt;(&amp;self, logic: L) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D, R&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;L: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>D) + 'static,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#110-115' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Creates a new collection by applying the supplied function to each input element.</p>
<p>Although the name suggests in-place mutation, this function does not change the source collection,
but rather re-uses the underlying allocations in its implementation. The method is semantically
equivalent to <code>map</code>, but can be more efficient.</p>
<h1 id="examples-1" class="section-header"><a href="#examples-1">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {
        <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>
             .<span class="ident">map_in_place</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">x</span> <span class="op">*=</span> <span class="number">2</span>)
             .<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">1</span>)
             .<span class="ident">assert_empty</span>();
    });
}</pre>
</div><h4 id='method.flat_map' class="method"><span id='flat_map.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.flat_map' class='fnname'>flat_map</a>&lt;I, L&gt;(&amp;self, logic: L) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, I::<a class="type" href="https://doc.rust-lang.org/nightly/core/iter/traits/trait.IntoIterator.html#associatedtype.Item" title="type core::iter::traits::IntoIterator::Item">Item</a>, R&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;I: <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/trait.IntoIterator.html" title="trait core::iter::traits::IntoIterator">IntoIterator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;I::<a class="type" href="https://doc.rust-lang.org/nightly/core/iter/traits/trait.IntoIterator.html#associatedtype.Item" title="type core::iter::traits::IntoIterator::Item">Item</a>: <a class="trait" href="../../../timely/trait.Data.html" title="trait timely::Data">Data</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(D) -&gt; I + 'static,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#138-146' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Creates a new collection by applying the supplied function to each input element and accumulating the results.</p>
<p>This method extracts an iterator from each input element, and extracts the full contents of the iterator. Be
warned that if the iterators produce substantial amounts of data, they are currently fully drained before
attempting to consolidate the results.</p>
<h1 id="examples-2" class="section-header"><a href="#examples-2">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {
        <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>
             .<span class="ident">flat_map</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="number">0</span> .. <span class="ident">x</span>);
    });
}</pre>
</div><h4 id='method.negate' class="method"><span id='negate.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.negate' class='fnname'>negate</a>(&amp;self) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D, R&gt;</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#176-180' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Creates a new collection whose counts are the negation of those in the input.</p>
<p>This method is most commonly used with <code>concat</code> to get those element in one collection but not another.
However, differential dataflow computations are still defined for all values of the difference type <code>R</code>,
including negative counts.</p>
<h1 id="examples-3" class="section-header"><a href="#examples-3">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>;

        <span class="kw">let</span> <span class="ident">odds</span> <span class="op">=</span> <span class="ident">data</span>.<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">1</span>);
        <span class="kw">let</span> <span class="ident">evens</span> <span class="op">=</span> <span class="ident">data</span>.<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">0</span>);

        <span class="ident">odds</span>.<span class="ident">negate</span>()
            .<span class="ident">concat</span>(<span class="kw-2">&amp;</span><span class="ident">data</span>)
            .<span class="ident">assert_eq</span>(<span class="kw-2">&amp;</span><span class="ident">evens</span>);
    });
}</pre>
</div><h4 id='method.filter' class="method"><span id='filter.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.filter' class='fnname'>filter</a>&lt;L&gt;(&amp;self, logic: L) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D, R&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;L: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>D) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + 'static,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#201-206' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Creates a new collection containing those input records satisfying the supplied predicate.</p>
<h1 id="examples-4" class="section-header"><a href="#examples-4">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {
        <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>
             .<span class="ident">map</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">*</span> <span class="number">2</span>)
             .<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">1</span>)
             .<span class="ident">assert_empty</span>();
    });
}</pre>
</div><h4 id='method.concat' class="method"><span id='concat.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.concat' class='fnname'>concat</a>(&amp;self, other: &amp;<a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D, R&gt;) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D, R&gt;</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#235-239' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Creates a new collection accumulating the contents of the two collections.</p>
<p>Despite the name, differential dataflow collections are unordered. This method is so named because the
implementation is the concatenation of the stream of updates, but it corresponds to the addition of the
two collections.</p>
<h1 id="examples-5" class="section-header"><a href="#examples-5">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>;

        <span class="kw">let</span> <span class="ident">odds</span> <span class="op">=</span> <span class="ident">data</span>.<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">1</span>);
        <span class="kw">let</span> <span class="ident">evens</span> <span class="op">=</span> <span class="ident">data</span>.<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">0</span>);

        <span class="ident">odds</span>.<span class="ident">concat</span>(<span class="kw-2">&amp;</span><span class="ident">evens</span>)
            .<span class="ident">assert_eq</span>(<span class="kw-2">&amp;</span><span class="ident">data</span>);
    });
}</pre>
</div><h4 id='method.explode' class="method"><span id='explode.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.explode' class='fnname'>explode</a>&lt;D2, R2, I, L&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;logic: L<br>) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D2, &lt;R2 as <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/arith/trait.Mul.html" title="trait core::ops::arith::Mul">Mul</a>&lt;R&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/ops/arith/trait.Mul.html#associatedtype.Output" title="type core::ops::arith::Mul::Output">Output</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;D2: <a class="trait" href="../../../timely/trait.Data.html" title="trait timely::Data">Data</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R2: <a class="trait" href="../../../differential_dataflow/difference/trait.Diff.html" title="trait differential_dataflow::difference::Diff">Diff</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/arith/trait.Mul.html" title="trait core::ops::arith::Mul">Mul</a>&lt;R&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;R2 as <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/arith/trait.Mul.html" title="trait core::ops::arith::Mul">Mul</a>&lt;R&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/ops/arith/trait.Mul.html#associatedtype.Output" title="type core::ops::arith::Mul::Output">Output</a>: <a class="trait" href="../../../timely/trait.Data.html" title="trait timely::Data">Data</a> + <a class="trait" href="../../../differential_dataflow/difference/trait.Diff.html" title="trait differential_dataflow::difference::Diff">Diff</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;I: <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/trait.IntoIterator.html" title="trait core::iter::traits::IntoIterator">IntoIterator</a>&lt;Item = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>D2, R2<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;L: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(D) -&gt; I + 'static,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#266-276' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Replaces each record with another, with a new difference type.</p>
<p>This method is most commonly used to take records containing aggregatable data (e.g. numbers to be summed)
and move the data into the difference component. This will allow differential dataflow to update in-place.</p>
<p>#Examples</p>

<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {

        <span class="kw">let</span> <span class="ident">nums</span> <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">0</span> .. <span class="number">10</span>).<span class="number">1</span>;
        <span class="kw">let</span> <span class="ident">x1</span> <span class="op">=</span> <span class="ident">nums</span>.<span class="ident">flat_map</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="number">0</span> .. <span class="ident">x</span>);
        <span class="kw">let</span> <span class="ident">x2</span> <span class="op">=</span> <span class="ident">nums</span>.<span class="ident">map</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> (<span class="ident">x</span>, <span class="number">9</span> <span class="op">-</span> <span class="ident">x</span>))
                     .<span class="ident">explode</span>(<span class="op">|</span>(<span class="ident">x</span>,<span class="ident">y</span>)<span class="op">|</span> <span class="prelude-val">Some</span>((<span class="ident">x</span>,<span class="ident">y</span>)));

        <span class="ident">x1</span>.<span class="ident">assert_eq</span>(<span class="kw-2">&amp;</span><span class="ident">x2</span>);
    });
}</pre>
</div><h4 id='method.enter' class="method"><span id='enter.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.enter' class='fnname'>enter</a>&lt;'a, T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;child: &amp;<a class="struct" href="../../../timely/dataflow/scopes/child/struct.Child.html" title="struct timely::dataflow::scopes::child::Child">Child</a>&lt;'a, G, T&gt;<br>) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;<a class="struct" href="../../../timely/dataflow/scopes/child/struct.Child.html" title="struct timely::dataflow::scopes::child::Child">Child</a>&lt;'a, G, T&gt;, D, R&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a>,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#304-310' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Brings a Collection into a nested scope.</p>
<h1 id="examples-6" class="section-header"><a href="#examples-6">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">timely</span>::<span class="ident">dataflow</span>::<span class="ident">Scope</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>;

        <span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">scoped</span>::<span class="op">&lt;</span>(),<span class="kw">_</span>,<span class="kw">_</span><span class="op">&gt;</span>(<span class="op">|</span><span class="ident">child</span><span class="op">|</span> {
            <span class="ident">data</span>.<span class="ident">enter</span>(<span class="ident">child</span>)
                .<span class="ident">leave</span>()
        });

        <span class="ident">data</span>.<span class="ident">assert_eq</span>(<span class="kw-2">&amp;</span><span class="ident">result</span>);
    });
}</pre>
</div><h4 id='method.enter_at' class="method"><span id='enter_at.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.enter_at' class='fnname'>enter_at</a>&lt;'a, T, F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;child: &amp;<a class="struct" href="../../../timely/dataflow/scopes/child/struct.Child.html" title="struct timely::dataflow::scopes::child::Child">Child</a>&lt;'a, G, T&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;initial: F<br>) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;<a class="struct" href="../../../timely/dataflow/scopes/child/struct.Child.html" title="struct timely::dataflow::scopes::child::Child">Child</a>&lt;'a, G, T&gt;, D, R&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>D) -&gt; T + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a>,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#339-354' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Brings a Collection into a nested scope, at varying times.</p>
<p>The <code>initial</code> function indicates the time at which each element of the Collection should appear.</p>
<h1 id="examples-7" class="section-header"><a href="#examples-7">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">timely</span>::<span class="ident">dataflow</span>::<span class="ident">Scope</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>;

        <span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">scoped</span>(<span class="op">|</span><span class="ident">child</span><span class="op">|</span> {
            <span class="ident">data</span>.<span class="ident">enter_at</span>(<span class="ident">child</span>, <span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">x</span>)
                .<span class="ident">leave</span>()
        });

        <span class="ident">data</span>.<span class="ident">assert_eq</span>(<span class="kw-2">&amp;</span><span class="ident">result</span>);
    });
}</pre>
</div><h4 id='method.delay' class="method"><span id='delay.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.delay' class='fnname'>delay</a>&lt;F&gt;(&amp;self, func: F) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D, R&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>) -&gt; G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a> + 'static,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#359-369' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Delays each difference by a supplied function.</p>
<p>It is assumed that <code>func</code> only advances timestamps; this is not verified, and things may go horribly
wrong if that assumption is incorrect.</p>
</div><h4 id='method.inspect' class="method"><span id='inspect.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.inspect' class='fnname'>inspect</a>&lt;F&gt;(&amp;self, func: F) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D, R&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>D, G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>, R<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>) + 'static,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#399-404' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Applies a supplied function to each update.</p>
<p>This method is most commonly used to report information back to the user, often for debugging purposes.
Any function can be used here, but be warned that the incremental nature of differential dataflow does
not guarantee that it will be called as many times as you might expect.</p>
<p>The <code>(data, time, diff)</code> triples indicate a change <code>diff</code> to the frequency of <code>data</code> which takes effect
at the logical time <code>time</code>. When times are totally ordered (for example, <code>usize</code>), these updates reflect
the changes along the sequence of collections. For partially ordered times, the mathematics are more
interesting and less intuitive, unfortunately.</p>
<h1 id="examples-8" class="section-header"><a href="#examples-8">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {
        <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>
             .<span class="ident">map_in_place</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">x</span> <span class="op">*=</span> <span class="number">2</span>)
             .<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">1</span>)
             .<span class="ident">inspect</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;error: {:?}&quot;</span>, <span class="ident">x</span>));
    });
}</pre>
</div><h4 id='method.inspect_batch' class="method"><span id='inspect_batch.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.inspect_batch' class='fnname'>inspect_batch</a>&lt;F&gt;(&amp;self, func: F) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D, R&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>D, G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>, R<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) + 'static,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#429-434' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Applies a supplied function to each batch of updates.</p>
<p>This method is analogous to <code>inspect</code>, but operates on batches and reveals the timestamp of the
timely dataflow capability associated with the batch of updates. The observed batching depends
on how the system executes, and may vary run to run.</p>
<h1 id="examples-9" class="section-header"><a href="#examples-9">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {
        <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>
             .<span class="ident">map_in_place</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">x</span> <span class="op">*=</span> <span class="number">2</span>)
             .<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">1</span>)
             .<span class="ident">inspect_batch</span>(<span class="op">|</span><span class="ident">t</span>,<span class="ident">xs</span><span class="op">|</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;errors @ {:?}: {:?}&quot;</span>, <span class="ident">t</span>, <span class="ident">xs</span>));
    });
}</pre>
</div><h4 id='method.probe' class="method"><span id='probe.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.probe' class='fnname'>probe</a>(&amp;self) -&gt; <a class="struct" href="../../../timely/dataflow/operators/probe/struct.Handle.html" title="struct timely::dataflow::operators::probe::Handle">Handle</a>&lt;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>&gt;</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#439-442' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Attaches a timely dataflow probe to the output of a Collection.</p>
<p>This probe is used to determine when the state of the Collection has stabilized and can
be read out.</p>
</div><h4 id='method.probe_with' class="method"><span id='probe_with.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.probe_with' class='fnname'>probe_with</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;mut <a class="struct" href="../../../timely/dataflow/operators/probe/struct.Handle.html" title="struct timely::dataflow::operators::probe::Handle">Handle</a>&lt;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>&gt;<br>) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D, R&gt;</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#449-453' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Attaches a timely dataflow probe to the output of a Collection.</p>
<p>This probe is used to determine when the state of the Collection has stabilized and all updates observed.
In addition, a probe is also often use to limit the number of rounds of input in flight at any moment; a
computation can wait until the probe has caught up to the input before introducing more rounds of data, to
avoid swamping the system.</p>
</div><h4 id='method.assert_eq' class="method"><span id='assert_eq.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.assert_eq' class='fnname'>assert_eq</a>(&amp;self, other: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Self) <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;D: <a class="trait" href="../../../differential_dataflow/trait.Data.html" title="trait differential_dataflow::Data">Data</a> + <a class="trait" href="../../../differential_dataflow/hashable/trait.Hashable.html" title="trait differential_dataflow::hashable::Hashable">Hashable</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>: <a class="trait" href="../../../differential_dataflow/lattice/trait.Lattice.html" title="trait differential_dataflow::lattice::Lattice">Lattice</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a>,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#484-491' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Assert if the collections are ever different.</p>
<p>Because this is a dataflow fragment, the test is only applied as the computation is run. If the computation
is not run, or not run to completion, there may be un-exercised times at which the collections could vary.
Typically, a timely dataflow computation runs to completion on drop, and so clean exit from a program should
indicate that this assertion never found cause to complain.</p>
<h1 id="examples-10" class="section-header"><a href="#examples-10">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>;

        <span class="kw">let</span> <span class="ident">odds</span> <span class="op">=</span> <span class="ident">data</span>.<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">1</span>);
        <span class="kw">let</span> <span class="ident">evens</span> <span class="op">=</span> <span class="ident">data</span>.<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">0</span>);

        <span class="ident">odds</span>.<span class="ident">concat</span>(<span class="kw-2">&amp;</span><span class="ident">evens</span>)
            .<span class="ident">assert_eq</span>(<span class="kw-2">&amp;</span><span class="ident">data</span>);
    });
}</pre>
</div><h4 id='method.assert_empty' class="method"><span id='assert_empty.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.assert_empty' class='fnname'>assert_empty</a>(&amp;self) <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;D: <a class="trait" href="../../../differential_dataflow/trait.Data.html" title="trait differential_dataflow::Data">Data</a> + <a class="trait" href="../../../differential_dataflow/hashable/trait.Hashable.html" title="trait differential_dataflow::hashable::Hashable">Hashable</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>: <a class="trait" href="../../../differential_dataflow/lattice/trait.Lattice.html" title="trait differential_dataflow::lattice::Lattice">Lattice</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a>,&nbsp;</span></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#518-525' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Assert if the collection is ever non-empty.</p>
<p>Because this is a dataflow fragment, the test is only applied as the computation is run. If the computation
is not run, or not run to completion, there may be un-exercised times at which the collection could be
non-empty. Typically, a timely dataflow computation runs to completion on drop, and so clean exit from a
program should indicate that this assertion never found cause to complain.</p>
<h1 id="examples-11" class="section-header"><a href="#examples-11">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {
        <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>
             .<span class="ident">map</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">*</span> <span class="number">2</span>)
             .<span class="ident">filter</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">==</span> <span class="number">1</span>)
             .<span class="ident">assert_empty</span>();
    });
}</pre>
</div><h4 id='method.scope' class="method"><span id='scope.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.scope' class='fnname'>scope</a>(&amp;self) -&gt; G</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#528-530' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>The scope containing the underlying timely dataflow stream.</p>
</div></div><div class='impl-items'><h4 id='method.leave' class="method"><span id='leave.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.leave' class='fnname'>leave</a>(&amp;self) -&gt; <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;G, D, R&gt;</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/collection.rs.html#560-565' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Returns the final value of a Collection from a nested scope to its containing scope.</p>
<h1 id="examples-12" class="section-header"><a href="#examples-12">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">timely</span>::<span class="ident">dataflow</span>::<span class="ident">Scope</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">operators</span>::<span class="kw-2">*</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">example</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">1</span> .. <span class="number">10</span>).<span class="number">1</span>;

        <span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">scoped</span>::<span class="op">&lt;</span>(),<span class="kw">_</span>,<span class="kw">_</span><span class="op">&gt;</span>(<span class="op">|</span><span class="ident">child</span><span class="op">|</span> {
            <span class="ident">data</span>.<span class="ident">enter</span>(<span class="ident">child</span>)
                .<span class="ident">leave</span>()
        });

        <span class="ident">data</span>.<span class="ident">assert_eq</span>(<span class="kw-2">&amp;</span><span class="ident">result</span>);
    });
}</pre>
</div></div>
                <h2 id='implementations' class='small-section-header'>
                  Trait Implementations<a href='#implementations' class='anchor'></a>
                </h2>
                <div id='implementations-list'><h3 id='impl-Deref' class='impl'><span class='in-band'><table class='table-display'><tbody><tr><td><code>impl&lt;'a, G:&nbsp;<a class="trait" href="../../../timely/dataflow/scopes/trait.Scope.html" title="trait timely::dataflow::scopes::Scope">Scope</a>, D:&nbsp;<a class="trait" href="../../../differential_dataflow/trait.Data.html" title="trait differential_dataflow::Data">Data</a>, R:&nbsp;<a class="trait" href="../../../differential_dataflow/difference/trait.Diff.html" title="trait differential_dataflow::difference::Diff">Diff</a>, T:&nbsp;<a class="trait" href="../../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a> + <a class="trait" href="../../../differential_dataflow/lattice/trait.Lattice.html" title="trait differential_dataflow::lattice::Lattice">Lattice</a>&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a> for <a class="struct" href="../../../differential_dataflow/operators/iterate/struct.CoreVariable.html" title="struct differential_dataflow::operators::iterate::CoreVariable">CoreVariable</a>&lt;'a, G, D, R, T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;G::<a class="type" href="../../../timely/dataflow/scopes/trait.ScopeParent.html#associatedtype.Timestamp" title="type timely::dataflow::scopes::ScopeParent::Timestamp">Timestamp</a>: <a class="trait" href="../../../differential_dataflow/lattice/trait.Lattice.html" title="trait differential_dataflow::lattice::Lattice">Lattice</a>,&nbsp;</span></code><a href='#impl-Deref' class='anchor'></a></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/operators/iterate.rs.html#202-207' title='goto source code'>[src]</a></span></td></tr></tbody></table></h3><div class='impl-items'><h4 id='associatedtype.Target' class="type"><span id='Target.t' class='invisible'><code>type <a href='https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html#associatedtype.Target' class="type">Target</a> = <a class="struct" href="../../../differential_dataflow/collection/struct.Collection.html" title="struct differential_dataflow::collection::Collection">Collection</a>&lt;<a class="struct" href="../../../timely/dataflow/scopes/child/struct.Child.html" title="struct timely::dataflow::scopes::child::Child">Child</a>&lt;'a, G, T&gt;, D, R&gt;</code></span></h4>
<div class='docblock'><p>The resulting type after dereferencing.</p>
</div><h4 id='method.deref' class="method"><span id='deref.v' class='invisible'><table class='table-display'><tbody><tr><td><code>fn <a href='https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html#tymethod.deref' class='fnname'>deref</a>(&amp;self) -&gt; &amp;Self::<a class="type" href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a></code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/differential_dataflow/operators/iterate.rs.html#204-206' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Dereferences the value.</p>
</div></div></div>
                <h2 id='synthetic-implementations' class='small-section-header'>
                  Auto Trait Implementations<a href='#synthetic-implementations' class='anchor'></a>
                </h2>
                <div id='synthetic-implementations-list'>
            <h3 id='impl-Send' class='impl'><span class='in-band'><table class='table-display'><tbody><tr><td><code>impl&lt;'a, G, D, R, T&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../../../differential_dataflow/operators/iterate/struct.CoreVariable.html" title="struct differential_dataflow::operators::iterate::CoreVariable">CoreVariable</a>&lt;'a, G, D, R, T&gt;</code><a href='#impl-Send' class='anchor'></a></span></td><td><span class='out-of-band'></span></td></tr></tbody></table></h3><div class='impl-items'></div><h3 id='impl-Sync' class='impl'><span class='in-band'><table class='table-display'><tbody><tr><td><code>impl&lt;'a, G, D, R, T&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../../../differential_dataflow/operators/iterate/struct.CoreVariable.html" title="struct differential_dataflow::operators::iterate::CoreVariable">CoreVariable</a>&lt;'a, G, D, R, T&gt;</code><a href='#impl-Sync' class='anchor'></a></span></td><td><span class='out-of-band'></span></td></tr></tbody></table></h3><div class='impl-items'></div></div></section><section id="search" class="content hidden"></section><section class="footer"></section><aside id="help" class="hidden"><div><h1 class="hidden">Help</h1><div class="shortcuts"><h2>Keyboard Shortcuts</h2><dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd><dt><kbd>S</kbd></dt><dd>Focus the search field</dd><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd><dt><kbd>↹</kbd></dt><dd>Switch tab</dd><dt><kbd>&#9166;</kbd></dt><dd>Go to active search result</dd><dt><kbd>+</kbd></dt><dd>Expand all sections</dd><dt><kbd>-</kbd></dt><dd>Collapse all sections</dd></dl></div><div class="infos"><h2>Search Tricks</h2><p>Prefix searches with a type followed by a colon (e.g. <code>fn:</code>) to restrict the search to a given type.</p><p>Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, and <code>const</code>.</p><p>Search functions by type signature (e.g. <code>vec -> usize</code> or <code>* -> vec</code>)</p><p>Search multiple things at once by splitting your query with comma (e.g. <code>str,u8</code> or <code>String,struct:Vec,test</code>)</p></div></div></aside><script>window.rootPath = "../../../";window.currentCrate = "differential_dataflow";</script><script src="../../../aliases.js"></script><script src="../../../main.js"></script><script defer src="../../../search-index.js"></script></body></html>