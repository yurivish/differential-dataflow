<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `InputSession` struct in crate `differential_dataflow`."><meta name="keywords" content="rust, rustlang, rust-lang, InputSession"><title>differential_dataflow::input::InputSession - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script></head><body class="rustdoc struct"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><p class='location'>Struct InputSession</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#methods">Methods</a><div class="sidebar-links"><a href="#method.insert">insert</a><a href="#method.remove">remove</a><a href="#method.from">from</a><a href="#method.update">update</a><a href="#method.flush">flush</a><a href="#method.advance_to">advance_to</a><a href="#method.epoch">epoch</a><a href="#method.time">time</a><a href="#method.close">close</a></div><a class="sidebar-title" href="#implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Drop">Drop</a></div><a class="sidebar-title" href="#synthetic-implementations">Auto Trait Implementations</a><div class="sidebar-links"><a href="#impl-Send">!Send</a><a href="#impl-Sync">!Sync</a></div></div><p class='location'><a href='../index.html'>differential_dataflow</a>::<wbr><a href='index.html'>input</a></p><script>window.sidebarCurrent = {name: 'InputSession', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><input class="search-input" name="search" autocomplete="off" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='in-band'>Struct <a href='../index.html'>differential_dataflow</a>::<wbr><a href='index.html'>input</a>::<wbr><a class="struct" href=''>InputSession</a></span><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/differential_dataflow/input.rs.html#154-158' title='goto source code'>[src]</a></span></h1><div class="docblock type-decl"><pre class='rust struct'>pub struct InputSession&lt;T:&nbsp;<a class="trait" href="../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>, D:&nbsp;<a class="trait" href="../../differential_dataflow/trait.Data.html" title="trait differential_dataflow::Data">Data</a>, R:&nbsp;<a class="trait" href="../../differential_dataflow/difference/trait.Diff.html" title="trait differential_dataflow::difference::Diff">Diff</a>&gt; { /* fields omitted */ }</pre></div><div class='docblock'><p>An input session wrapping a single timely dataflow capability.</p>
<p>Each timely dataflow message has a corresponding capability, which is a logical time in the
timely dataflow system. Differential dataflow updates can happen at a much higher rate than
timely dataflow's progress tracking infrastructure supports, because the logical times are
promoted to data and updates are batched together. The <code>InputSession</code> type does this batching.</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">timely</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">differential_dataflow</span>;

<span class="kw">use</span> <span class="ident">timely</span>::<span class="ident">Configuration</span>;
<span class="kw">use</span> <span class="ident">differential_dataflow</span>::<span class="ident">input</span>::<span class="ident">Input</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    ::<span class="ident">timely</span>::<span class="ident">execute</span>(<span class="ident">Configuration</span>::<span class="ident">Thread</span>, <span class="op">|</span><span class="ident">worker</span><span class="op">|</span> {

        <span class="kw">let</span> (<span class="kw-2">mut</span> <span class="ident">handle</span>, <span class="ident">probe</span>) <span class="op">=</span> <span class="ident">worker</span>.<span class="ident">dataflow</span>(<span class="op">|</span><span class="ident">scope</span><span class="op">|</span> {
            <span class="comment">// create input handle and collection.</span>
            <span class="kw">let</span> (<span class="ident">handle</span>, <span class="ident">data</span>) <span class="op">=</span> <span class="ident">scope</span>.<span class="ident">new_collection_from</span>(<span class="number">0</span> .. <span class="number">10</span>);
            <span class="kw">let</span> <span class="ident">probe</span> <span class="op">=</span> <span class="ident">data</span>.<span class="ident">map</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">*</span> <span class="number">2</span>)
                            .<span class="ident">inspect</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;{:?}&quot;</span>, <span class="ident">x</span>))
                            .<span class="ident">probe</span>();
            (<span class="ident">handle</span>, <span class="ident">probe</span>)
        });

        <span class="ident">handle</span>.<span class="ident">insert</span>(<span class="number">3</span>);
        <span class="ident">handle</span>.<span class="ident">advance_to</span>(<span class="number">1</span>);
        <span class="ident">handle</span>.<span class="ident">insert</span>(<span class="number">5</span>);
        <span class="ident">handle</span>.<span class="ident">advance_to</span>(<span class="number">2</span>);
        <span class="ident">handle</span>.<span class="ident">flush</span>();

        <span class="kw">while</span> <span class="ident">probe</span>.<span class="ident">less_than</span>(<span class="ident">handle</span>.<span class="ident">time</span>()) {
            <span class="ident">worker</span>.<span class="ident">step</span>();
        }

        <span class="ident">handle</span>.<span class="ident">remove</span>(<span class="number">5</span>);
        <span class="ident">handle</span>.<span class="ident">advance_to</span>(<span class="number">3</span>);
        <span class="ident">handle</span>.<span class="ident">flush</span>();

        <span class="kw">while</span> <span class="ident">probe</span>.<span class="ident">less_than</span>(<span class="ident">handle</span>.<span class="ident">time</span>()) {
            <span class="ident">worker</span>.<span class="ident">step</span>();
        }

    }).<span class="ident">unwrap</span>();
}</pre>
</div>
                    <h2 id='methods' class='small-section-header'>
                      Methods<a href='#methods' class='anchor'></a>
                    </h2>
                <h3 id='impl' class='impl'><span class='in-band'><table class='table-display'><tbody><tr><td><code>impl&lt;T:&nbsp;<a class="trait" href="../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>, D:&nbsp;<a class="trait" href="../../differential_dataflow/trait.Data.html" title="trait differential_dataflow::Data">Data</a>&gt; <a class="struct" href="../../differential_dataflow/input/struct.InputSession.html" title="struct differential_dataflow::input::InputSession">InputSession</a>&lt;T, D, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.isize.html">isize</a>&gt;</code><a href='#impl' class='anchor'></a></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#160-165' title='goto source code'>[src]</a></span></td></tr></tbody></table></h3><div class='impl-items'><h4 id='method.insert' class="method"><span id='insert.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.insert' class='fnname'>insert</a>(&amp;mut self, element: D)</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#162' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Adds an element to the collection.</p>
</div><h4 id='method.remove' class="method"><span id='remove.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.remove' class='fnname'>remove</a>(&amp;mut self, element: D)</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#164' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Removes an element from the collection.</p>
</div></div><h3 id='impl-1' class='impl'><span class='in-band'><table class='table-display'><tbody><tr><td><code>impl&lt;'a, T:&nbsp;<a class="trait" href="../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>, D:&nbsp;<a class="trait" href="../../differential_dataflow/trait.Data.html" title="trait differential_dataflow::Data">Data</a>, R:&nbsp;<a class="trait" href="../../differential_dataflow/difference/trait.Diff.html" title="trait differential_dataflow::difference::Diff">Diff</a>&gt; <a class="struct" href="../../differential_dataflow/input/struct.InputSession.html" title="struct differential_dataflow::input::InputSession">InputSession</a>&lt;T, D, R&gt;</code><a href='#impl-1' class='anchor'></a></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#181-234' title='goto source code'>[src]</a></span></td></tr></tbody></table></h3><div class='impl-items'><h4 id='method.from' class="method"><span id='from.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.from' class='fnname'>from</a>(handle: <a class="struct" href="../../timely/dataflow/operators/input/struct.Handle.html" title="struct timely::dataflow::operators::input::Handle">Handle</a>&lt;T, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>D, <a class="struct" href="../../timely/progress/nested/product/struct.Product.html" title="struct timely::progress::nested::product::Product">Product</a>&lt;<a class="struct" href="../../timely/progress/timestamp/struct.RootTimestamp.html" title="struct timely::progress::timestamp::RootTimestamp">RootTimestamp</a>, T&gt;, R<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;) -&gt; Self</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#184-190' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Creates a new session from a reference to an input handle.</p>
</div><h4 id='method.update' class="method"><span id='update.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.update' class='fnname'>update</a>(&amp;mut self, element: D, change: R)</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#193-202' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Adds to the weight of an element in the collection.</p>
</div><h4 id='method.flush' class="method"><span id='flush.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.flush' class='fnname'>flush</a>(&amp;mut self)</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#209-214' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Forces buffered data into the timely dataflow input, and advances its time to match that of the session.</p>
<p>It is important to call <code>flush</code> before expecting timely dataflow to report progress. Until this method is
called, all updates may still be in internal buffers and not exposed to timely dataflow. Once the method is
called, all buffers are flushed and timely dataflow is advised that some logical times are no longer possible.</p>
</div><h4 id='method.advance_to' class="method"><span id='advance_to.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.advance_to' class='fnname'>advance_to</a>(&amp;mut self, time: T)</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#221-225' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Advances the logical time for future records.</p>
<p>Importantly, this method does <strong>not</strong> immediately inform timely dataflow of the change. This happens only when
the session is dropped or flushed. It is not correct to use this time as a basis for a computation's <code>step_while</code>
method unless the session has just been flushed.</p>
</div><h4 id='method.epoch' class="method"><span id='epoch.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.epoch' class='fnname'>epoch</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#228' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Reveals the current time of the session.</p>
</div><h4 id='method.time' class="method"><span id='time.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.time' class='fnname'>time</a>(&amp;self) -&gt; &amp;<a class="struct" href="../../timely/progress/nested/product/struct.Product.html" title="struct timely::progress::nested::product::Product">Product</a>&lt;<a class="struct" href="../../timely/progress/timestamp/struct.RootTimestamp.html" title="struct timely::progress::timestamp::RootTimestamp">RootTimestamp</a>, T&gt;</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#230' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Reveals the current time of the session.</p>
</div><h4 id='method.close' class="method"><span id='close.v' class='invisible'><table class='table-display'><tbody><tr><td><code>pub fn <a href='#method.close' class='fnname'>close</a>(self)</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#233' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Closes the input, flushing and sealing the wrapped timely input.</p>
</div></div>
                <h2 id='implementations' class='small-section-header'>
                  Trait Implementations<a href='#implementations' class='anchor'></a>
                </h2>
                <div id='implementations-list'><h3 id='impl-Drop' class='impl'><span class='in-band'><table class='table-display'><tbody><tr><td><code>impl&lt;T:&nbsp;<a class="trait" href="../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>, D:&nbsp;<a class="trait" href="../../differential_dataflow/trait.Data.html" title="trait differential_dataflow::Data">Data</a>, R:&nbsp;<a class="trait" href="../../differential_dataflow/difference/trait.Diff.html" title="trait differential_dataflow::difference::Diff">Diff</a>&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html" title="trait core::ops::drop::Drop">Drop</a> for <a class="struct" href="../../differential_dataflow/input/struct.InputSession.html" title="struct differential_dataflow::input::InputSession">InputSession</a>&lt;T, D, R&gt;</code><a href='#impl-Drop' class='anchor'></a></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#236-240' title='goto source code'>[src]</a></span></td></tr></tbody></table></h3><div class='impl-items'><h4 id='method.drop' class="method"><span id='drop.v' class='invisible'><table class='table-display'><tbody><tr><td><code>fn <a href='https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html#tymethod.drop' class='fnname'>drop</a>(&amp;mut self)</code></span></td><td><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/differential_dataflow/input.rs.html#237-239' title='goto source code'>[src]</a></td></tr></tbody></table></span></h4><div class='docblock'><p>Executes the destructor for this type. <a href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html#tymethod.drop">Read more</a></p>
</div></div></div>
                <h2 id='synthetic-implementations' class='small-section-header'>
                  Auto Trait Implementations<a href='#synthetic-implementations' class='anchor'></a>
                </h2>
                <div id='synthetic-implementations-list'>
            <h3 id='impl-Send' class='impl'><span class='in-band'><table class='table-display'><tbody><tr><td><code>impl&lt;T, D, R&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../../differential_dataflow/input/struct.InputSession.html" title="struct differential_dataflow::input::InputSession">InputSession</a>&lt;T, D, R&gt;</code><a href='#impl-Send' class='anchor'></a></span></td><td><span class='out-of-band'></span></td></tr></tbody></table></h3><div class='impl-items'></div><h3 id='impl-Sync' class='impl'><span class='in-band'><table class='table-display'><tbody><tr><td><code>impl&lt;T, D, R&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../../differential_dataflow/input/struct.InputSession.html" title="struct differential_dataflow::input::InputSession">InputSession</a>&lt;T, D, R&gt;</code><a href='#impl-Sync' class='anchor'></a></span></td><td><span class='out-of-band'></span></td></tr></tbody></table></h3><div class='impl-items'></div></div></section><section id="search" class="content hidden"></section><section class="footer"></section><aside id="help" class="hidden"><div><h1 class="hidden">Help</h1><div class="shortcuts"><h2>Keyboard Shortcuts</h2><dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd><dt><kbd>S</kbd></dt><dd>Focus the search field</dd><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd><dt><kbd>↹</kbd></dt><dd>Switch tab</dd><dt><kbd>&#9166;</kbd></dt><dd>Go to active search result</dd><dt><kbd>+</kbd></dt><dd>Expand all sections</dd><dt><kbd>-</kbd></dt><dd>Collapse all sections</dd></dl></div><div class="infos"><h2>Search Tricks</h2><p>Prefix searches with a type followed by a colon (e.g. <code>fn:</code>) to restrict the search to a given type.</p><p>Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, and <code>const</code>.</p><p>Search functions by type signature (e.g. <code>vec -> usize</code> or <code>* -> vec</code>)</p><p>Search multiple things at once by splitting your query with comma (e.g. <code>str,u8</code> or <code>String,struct:Vec,test</code>)</p></div></div></aside><script>window.rootPath = "../../";window.currentCrate = "differential_dataflow";</script><script src="../../aliases.js"></script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>